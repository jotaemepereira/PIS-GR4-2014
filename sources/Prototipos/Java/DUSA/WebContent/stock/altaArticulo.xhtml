<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<f:view contentType="text/html">
	<h:head>
		<link href="../CSS/General.css" rel="stylesheet" />
		<link href="../CSS/bootstrap.css" rel="stylesheet" />
		<link href="../CSS/bootstrap-theme.css" rel="stylesheet" />
		<link href="../CSS/bootstrap.min.css" rel="stylesheet" />
		<link href="../CSS/bootstrap-theme.min.css" rel="stylesheet" />
		<link href="../JS/chosen.min.css" rel="stylesheet" />
		<script src="../JS/bootstrap.js"></script>
		<script src="../JS/bootstrap.min.js"></script>
		<script src="../JS/chosen.jquery.min.js"></script>
		<script src="../JS/chosen.proto.min.js"></script>
		<f:facet name="first">
			<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
			<title>DUSA</title>
		</f:facet>
	</h:head>
	<h:body>
		<h:form id="form1">
			<p:growl id="messages" showDetail="true" />
			<ui:include src="../cabezal.xhtml" />
			<ui:include src="../menuVertical/stock.xhtml" />

			<div class="vpanel_right">
				<div class="wrapper">
					<p:remoteCommand name="rc" update="tablaProveedores"
					actionListener="#{stockBean.agregarProveedor}" />
				
					<p:panel id="panel" header="Alta de artículo">				
						<div class="container-fluid">
							<div class="row" style="margin-bottom: 1%;">
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<p:outputLabel for="tipoArticulo" value="Tipo de Artículo:" />
									<p:inputText id="tipoArticulo" styleClass="form-control" value="#{stockBean.articulo.tipoArticulo}" style="height: 100%"
									required="true" />
								</div>
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<p:outputLabel for="descripcion" value="Descripción:" />
									<p:inputText id="descripcion" styleClass="form-control" value="#{stockBean.articulo.descripcion}" size="60" style="height: 100%"
									required="true" />
								</div>
							</div>
							
							<div class="row" style="margin-bottom: 1%;">
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:outputLabel for="proveedor" value="Proveedor:" />
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:selectOneMenu id="proveedor" value="#{stockBean.proveedor}"
									        			filter="true" filterMatchMode="contains" required="false" >
									            <f:selectItem itemLabel="Seleccione proveedor" itemValue="-1" />
									            <f:selectItems value="#{stockBean.proveedores}" var="p" itemLabel="#{p.nombreComercial}" itemValue="#{p.idProveedor}"/>
									        </p:selectOneMenu>
								        </div>
							        </div>
								</div>
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:outputLabel for="codigoIdentificador" value="Código identificador:" />
										</div>
									</div>
									<div class="row">
										<div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
											<p:inputText id="codigoIdentificador" styleClass="form-control" value="#{stockBean.codigoIdentificador}" style="height: 100%"
											required="false" />
										</div>
										<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
											<h:button value="Agregar" onclick="rc()" class="btn btn-info"
											icon="ui-icon-plusthick" />
										</div>
									</div>
								</div>
							</div>
							
							<div class="row" style="margin-bottom: 1%;">
								<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
									<p:dataTable id="tablaProveedores" var="proveedor" value="#{stockBean.articulo.proveedores}">
									    <p:column headerText="Nombre comercial">
									        <h:outputText value="#{proveedor.nombreComercial}" />
									    </p:column>
									 
									    <p:column headerText="Código identificador">
									        <h:outputText value="#{proveedor.codigoIdentificador}" />
									    </p:column>
									 </p:dataTable>
								 </div>
							</div>
							
							<div class="row" style="margin-bottom: 1%;">
								<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
									<p:outputLabel for="presentaciones" value="Presentaciones:" />
									<p:selectManyMenu id="presentaciones" value="#{stockBean.articulo.presentaciones}" required="false" 
				                          var="p" filter="true" filterMatchMode="contains" showCheckbox="true" style="height: 100%; width: 100%">
							            <f:selectItems value="#{stockBean.presentaciones}" var="presentacion" itemLabel="#{presentacion.descripcion}" itemValue="#{presentacion.idPresentacion}" />
							 
							            <p:column>
							                <h:outputText value="#{p.descripcion}" />
							            </p:column>
						        	</p:selectManyMenu>
								</div>
								<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
				       				<p:outputLabel for="drogas" value="Drogas:" />
				       				<p:selectManyMenu id="drogas" value="#{stockBean.articulo.drogas}" required="false"
				                          var="d" filter="true" filterMatchMode="contains" showCheckbox="true" style="height: 100%; width: 100%">
							            <f:selectItems value="#{stockBean.drogas}" var="droga" itemLabel="#{droga.descripcion}" itemValue="#{droga.idDroga}" />
							 
							            <p:column>
							                <h:outputText value="#{d.descripcion}" />
							            </p:column>
						        	</p:selectManyMenu>
								</div>
								<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
					       			<p:outputLabel for="accionesTer" value="Acciones Terapéuticas:" />
					       			<p:selectManyMenu id="accionesTer" value="#{stockBean.articulo.accionesTer}" required="false"
					                          var="a" filter="true" filterMatchMode="contains" showCheckbox="true" style="height: 100%; width: 100%">
							            <f:selectItems value="#{stockBean.accionesTer}" var="accionTer" itemLabel="#{accionTer.descripcion}" itemValue="#{accionTer.idAccionTer}" />
							 
							            <p:column>
							                <h:outputText value="#{a.descripcion}" />
							            </p:column>
							        </p:selectManyMenu>
								</div>
							</div>
							
							<div class="row" style="margin-bottom: 1%;">
								<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:outputLabel for="psicofarmaco" value="Es psicofármaco:" />
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:selectBooleanCheckbox id="psicofarmaco" value="#{stockBean.articulo.esPsicofarmaco}" />
										</div>
									</div>							
								</div>
								<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:outputLabel for="estupefaciente" value="Es estupefaciente:" />
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:selectBooleanCheckbox id="estupefaciente" value="#{stockBean.articulo.esEstupefaciente}" />
										</div>
									</div>
								</div>
								<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:outputLabel for="formaVenta" value="Forma de venta:" />
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:selectOneMenu id="formaVenta" value="#{stockBean.articulo.codigoVenta}" required="false" >
									            <f:selectItem itemLabel="Seleccione forma de venta" itemValue="-1" />
									            <f:selectItems value="#{stockBean.formasVenta}" var="f" itemLabel="#{f.descripcion}" itemValue="#{f.formaVenta}"/>
									        </p:selectOneMenu>
									    </div>
									</div>
								</div>
							</div>
							
							<div class="row" style="margin-bottom: 1%;">
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<p:outputLabel for="costoLista" value="Costo de lista ($):" />
									<p:inputText id="costoLista" styleClass="form-control" value="#{stockBean.articulo.costoLista}" converterMessage="Dato Inválido." style="height: 100%"
									required="true" >
					                	<f:convertNumber type="currency" currencySymbol="$"/>
					            	</p:inputText>
					            	<p:message for="costoLista" />
								</div>
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<p:outputLabel for="costoReal" value="Costo real ($):" />
									<p:inputText id="costoReal" styleClass="form-control" value="#{stockBean.articulo.ultimoCosto}" converterMessage="Dato Inválido." style="height: 100%"
									required="true" >
					                	<f:convertNumber type="currency" currencySymbol="$"/>
					            	</p:inputText>
					            	<p:message for="costoReal" />
								</div>
							</div>
							
							<div class="row" style="margin-bottom: 1%;">
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<p:outputLabel for="precioPublico" value="Precio público ($):" />
									<p:inputText id="precioPublico" styleClass="form-control" value="#{stockBean.articulo.precioUnitario}" converterMessage="Dato Inválido." style="height: 100%"
									required="true" >
					                	<f:convertNumber type="currency" currencySymbol="$"/>
					            	</p:inputText>
					            	<p:message for="precioPublico" />
								</div>
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<p:outputLabel for="precioVenta" value="Precio de venta ($):" />
									<p:inputText id="precioVenta" styleClass="form-control" value="#{stockBean.articulo.precioVenta}" converterMessage="Dato Inválido." style="height: 100%"
									required="true" >
					                	<f:convertNumber type="currency" currencySymbol="$"/>
					            	</p:inputText>
					            	<p:message for="precioVenta" />
								</div>
							</div>
							
							<div class="row" style="margin-bottom: 1%;">
								<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:outputLabel for="tipoIVA" value="Tipo de IVA:" />
										</div>
									</div>
									<div class="row">
										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
											<p:selectOneMenu id="tipoIVA" value="#{stockBean.articulo.tipoIva}" style="height: 100%" required="false" >
									            <f:selectItem itemLabel="Seleccione tipo de IVA" itemValue="-1" />
									            <f:selectItems value="#{stockBean.tiposIVA}" />
									        </p:selectOneMenu>
									    </div>
									</div>
								</div>
							</div>

							<div class="row" style="margin-bottom: 1%;">
								<h:button value="Cancelar" update="panel" class="btn btn-default pull-right" />
								<h:button type="button" value="Confirmar" update="panel" class="btn btn-success pull-right"
								actionListener="#{stockBean.altaArticulo}"
								icon="ui-icon-check" />								
							</div>
						</div>
					</p:panel>
				</div>
			</div>
		</h:form>
	</h:body>
</f:view>
</html>